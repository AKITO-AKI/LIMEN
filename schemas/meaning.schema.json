{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://limen.local/schemas/meaning.schema.json",
  "title": "LIMEN Meaning",
  "type": "object",
  "additionalProperties": false,
  "required": ["schemaVersion", "sourceLanguage", "targetLanguage", "intent", "params", "confidence"],
  "properties": {
    "schemaVersion": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "sourceLanguage": {
      "type": "string",
      "enum": ["JSL", "ASL", "CSL"]
    },
    "targetLanguage": {
      "type": "string",
      "enum": ["JSL", "ASL", "CSL"]
    },
    "intent": {
      "type": "string",
      "description": "MVP intent label.",
      "enum": [
        "greeting",
        "introduce_self",
        "thanks",
        "sorry",
        "help",
        "request",
        "slow_down",
        "where",
        "warning",
        "yes",
        "no"
      ]
    },
    "params": {
      "type": "object",
      "additionalProperties": false,
      "required": ["direction", "intensity", "tempo", "politeness"],
      "properties": {
        "direction": { "$ref": "#/$defs/vector3" },
        "intensity": { "$ref": "#/$defs/unitInterval" },
        "tempo": { "$ref": "#/$defs/unitInterval" },
        "politeness": { "$ref": "#/$defs/unitInterval" }
      }
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1
    },
    "rationale": {
      "type": "string",
      "maxLength": 160,
      "description": "UI-safe short explanation of the estimate."
    },
    "debug": {
      "type": "object",
      "description": "Optional debug fields (do not show to end users by default).",
      "additionalProperties": true
    }
  },
  "$defs": {
    "unitInterval": {
      "type": "number",
      "minimum": 0,
      "maximum": 1
    },
    "vector3": {
      "type": "object",
      "additionalProperties": false,
      "required": ["x", "y", "z"],
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" }
      }
    }
  }
}
